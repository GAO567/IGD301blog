<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Roll-a-ball | Mengfei&#39;s Blog</title>
<meta name="keywords" content="Lab">
<meta name="description" content="Create a Unity game: Roll a ball">
<meta name="author" content="">
<link rel="canonical" href="/posts/lab3/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="mask-icon" href="safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Roll-a-ball" />
<meta property="og:description" content="Create a Unity game: Roll a ball" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/lab3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-27T10:35:20+01:00" />
<meta property="article:modified_time" content="2023-11-27T10:35:20+01:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Roll-a-ball"/>
<meta name="twitter:description" content="Create a Unity game: Roll a ball"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Roll-a-ball",
      "item": "/posts/lab3/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Roll-a-ball",
  "name": "Roll-a-ball",
  "description": "Create a Unity game: Roll a ball",
  "keywords": [
    "Lab"
  ],
  "articleBody": "Roll-a-ball is a learning project for Unity beginners. In this learning project, you’ll use Unity Editor and its built-in capabilities to set up a simple game environment and write your own custom scripts to create the game functionality.\nTo begin with, let’s first create a new Unity project and name it as “Roll-a-ball”. Create a new scene and name it as roll-a-ball. Add a plane object as the “Ground”. Create a material for the ground. Change material color and drag it to the “Ground” object. Follow the previous steps, create a sphere object as the “Player\"and also add a material and Rigidbody to it. Adjust the right Transform to put the ball on the ground. In this project, we use Unity Input System to control Player with arrow keys. First open the Package Manager and find Input System. Install it! Then add Player input component to “Player” and create a new action. Create a new C# script as PlayerController.\nPlayerController.cs:\nusing System.Collections; using System.Collections.Generic; using UnityEngine; using UnityEngine.InputSystem; public class PlayerController : MonoBehaviour { public float speed = 0; private Rigidbody rb; private float movementX; private float movementY; // Start is called before the first frame update void Start() { rb = this.GetComponent(); } void OnMove(InputValue movementValue) { Vector2 movementVector = movementValue.Get(); movementX = movementVector.x; movementY = movementVector.y; } private void FixedUpdate() { Vector3 movement = new Vector3(movementX, 0.0f, movementY); rb.AddForce(movement * speed); } } We also want to let the camera follow the moving player. So let’s add a CameraController.cs to Main Camera. CameraController.cs:\nusing System.Collections; using System.Collections.Generic; using UnityEngine; public class CameraController : MonoBehaviour { public GameObject player; private Vector3 offset; // Start is called before the first frame update void Start() { offset = transform.position - player.transform.position; } // Update is called once per frame void LateUpdate() { transform.position = player.transform.position + offset; } } We want to limit the “Player” in the area of ground so let’s create 4 walls under an empty object “Walls”. Let’s add some rotating pick-ups so that player can hit the pick-up and get score. Let’s create a pick-up tagged with pockups as prefab and duplicate it.\nFor Player, we add OnTruggerEnter to PlayerController.cs so that the pickups will disappear after being hitted.\nprivate void OnTriggerEnter(Collider other) { if (other.gameObject.CompareTag(\"pickups\")) { other.gameObject.SetActive(false); } } For this pick-up, we’ll:\nadd Rotator.cs using System.Collections; using System.Collections.Generic; using UnityEngine; public class Rotator : MonoBehaviour { // Start is called before the first frame update void Start() { } // Update is called once per frame void Update() { transform.Rotate(new Vector3(15, 30, 45) * Time.deltaTime); } } In Box Collider component check Is Trigger In Rigidbody component uncheck Use Gravity check Is Kinematic Let’s create a UI to show scores and show Win! after some hits! What we need are 2 Text - TextMeshPro. One for CountText and the other for WinText. To update the CountText and display WinText after some hits,let’s add a few lines to PlayerController.cs.\nusing TMPro; //reference the namespace ... public TextMeshProUGUI countText; public GameObject winTextObject; ... void Start() { ... count = 0; SetCountText(); //set count to 0 winTextObject.SetActive(false); //hide Wintext } void SetCountText() { countText.text = \"Count: \" + count.ToString(); //set count if(count \u003e= 18) { winTextObject.SetActive(true); //display WinText after 18 hits } } private void OnTriggerEnter(Collider other) { if (other.gameObject.CompareTag(\"pickups\")) { other.gameObject.SetActive(false); count += 1; SetCountText(); // increase the count when hit and update CountText } } More features I call it Roll-a-ball:Endless. After each win, player gets the ability to jump from current ground. So that player can play this game again and again and again.\nvoid OnJump() { if(count \u003e= 18) {//player can jump only after winning rb.AddForce(new Vector3(0, 10 * speed, 0)); } } void CreateNewGround() { //Instantiate new ground and new pick-ups GameObject ground = Instantiate(groundPrefab, new Vector3(0, -15*level, 0), Quaternion.identity); ground.transform.localScale = new Vector3(2*(level + 1), 1, 2* (level + 1)); for(int i = 0; i \u003c 18; i++) { Vector3 randomPosition = new Vector3(Random.Range(-9f*(level+1),9f*(level+1)), 0.5f-level*15f, Random.Range(-9f* (level + 1), 9f* (level + 1))); Instantiate(pickupPrefab, randomPosition, Quaternion.identity); } } ",
  "wordCount" : "676",
  "inLanguage": "en",
  "datePublished": "2023-11-27T10:35:20+01:00",
  "dateModified": "2023-11-27T10:35:20+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/posts/lab3/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Mengfei's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="" accesskey="h" title="Mengfei&#39;s Blog (Alt + H)">Mengfei&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Roll-a-ball
    </h1>
    <div class="post-meta"><span title='2023-11-27 10:35:20 +0100 CET'>November 27, 2023</span>

</div>
  </header> 
  <div class="post-content"><p><a href="https://learn.unity.com/project/roll-a-ball">Roll-a-ball</a> is a learning project for Unity beginners. In this learning project, you&rsquo;ll use Unity Editor and its built-in capabilities to set up a simple game environment and write your own custom scripts to create the game functionality.</p>
<p><img loading="lazy" src="turorial.png" alt="alt text"  />
</p>
<p>To begin with, let&rsquo;s first create a new Unity project and name it as &ldquo;Roll-a-ball&rdquo;.
<img loading="lazy" src="new.png" alt="alt text"  />

Create a new scene and name it as roll-a-ball. Add a plane object as the &ldquo;Ground&rdquo;.
<img loading="lazy" src="ground.png" alt="alt text"  />

Create a material for the ground. Change material color and drag it to the &ldquo;Ground&rdquo; object.
<img loading="lazy" src="ground_material.png" alt="alt text"  />

Follow the previous steps, create a sphere object as the &ldquo;Player&quot;and also add a material and Rigidbody to it. Adjust the right Transform to put the ball on the ground.
<img loading="lazy" src="player.png" alt="alt text"  />
</p>
<p>In this project, we use Unity Input System to control Player with arrow keys. First open the Package Manager and find Input System. Install it!
<img loading="lazy" src="inputsystem.png" alt="alt text"  />

Then add <strong>Player input</strong> component to &ldquo;Player&rdquo; and create a new action. Create a new C# script as PlayerController.</p>
<p>PlayerController.cs:</p>
<pre tabindex="0"><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.InputSystem;

public class PlayerController : MonoBehaviour
{
    public float speed = 0;

    private Rigidbody rb;
    private float movementX;
    private float movementY;

    // Start is called before the first frame update
    void Start()
    {
        rb = this.GetComponent&lt;Rigidbody&gt;();
        
    }

    void OnMove(InputValue movementValue)
    {
        Vector2 movementVector = movementValue.Get&lt;Vector2&gt;();

        movementX = movementVector.x;
        movementY = movementVector.y;
    }


    private void FixedUpdate()
    {
        Vector3 movement = new Vector3(movementX, 0.0f, movementY);

        rb.AddForce(movement * speed);
    }
}
</code></pre><p>We also want to let the camera follow the moving player. So let&rsquo;s add a CameraController.cs to <strong>Main Camera</strong>.
CameraController.cs:</p>
<pre tabindex="0"><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CameraController : MonoBehaviour
{
    public GameObject player;

    private Vector3 offset;

    // Start is called before the first frame update
    void Start()
    {
        offset = transform.position - player.transform.position;
    }

    // Update is called once per frame
    void LateUpdate()
    {
        transform.position = player.transform.position + offset;
    }
}
</code></pre><p>We want to limit the &ldquo;Player&rdquo; in the area of ground so let&rsquo;s create 4 walls under an empty object &ldquo;Walls&rdquo;.
<img loading="lazy" src="walls.png" alt="alt text"  />

Let&rsquo;s add some rotating pick-ups so that player can hit the pick-up and get score. Let&rsquo;s create a pick-up tagged with pockups as prefab and duplicate it.</p>
<p>For Player, we add <strong>OnTruggerEnter</strong> to PlayerController.cs so that the pickups will disappear after being hitted.</p>
<pre tabindex="0"><code>private void OnTriggerEnter(Collider other)
    {
        if (other.gameObject.CompareTag(&#34;pickups&#34;))
        {
            other.gameObject.SetActive(false);

        }
    }
</code></pre><p>For this pick-up, we&rsquo;ll:</p>
<ul>
<li>add Rotator.cs</li>
</ul>
<pre tabindex="0"><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Rotator : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        transform.Rotate(new Vector3(15, 30, 45) * Time.deltaTime);   
    }
}
</code></pre><ul>
<li>In Box Collider component
<ul>
<li>check <strong>Is Trigger</strong></li>
</ul>
</li>
<li>In Rigidbody component
<ul>
<li>uncheck <strong>Use Gravity</strong></li>
<li>check <strong>Is Kinematic</strong></li>
</ul>
</li>
</ul>
<p><img loading="lazy" src="pickups.png" alt="alt text"  />

Let&rsquo;s create a UI to show scores and show <strong>Win!</strong> after some hits! What we need are 2 <strong>Text - TextMeshPro</strong>. One for CountText and the other for WinText.
<img loading="lazy" src="canvas.png" alt="alt text"  />

To update the CountText and display WinText after some hits,let&rsquo;s add a few lines to PlayerController.cs.</p>
<pre tabindex="0"><code>using TMPro; //reference the namespace
...
public TextMeshProUGUI countText;
public GameObject winTextObject;
...
    void Start()
    {
        ...
        count = 0;
        SetCountText(); //set count to 0
        winTextObject.SetActive(false); //hide Wintext
    }
    void SetCountText()
    {
        countText.text = &#34;Count: &#34; + count.ToString(); //set count
        if(count &gt;= 18)
        {
            winTextObject.SetActive(true); //display WinText after 18 hits
        }
    }
    private void OnTriggerEnter(Collider other)
    {
        if (other.gameObject.CompareTag(&#34;pickups&#34;))
        {
            other.gameObject.SetActive(false);
            count += 1;
            SetCountText(); // increase the count when hit and update CountText

        }
    }
</code></pre><h3 id="more-features">More features<a hidden class="anchor" aria-hidden="true" href="#more-features">#</a></h3>
<p>I call it <strong>Roll-a-ball:Endless</strong>. After each win, player gets the ability to jump from current ground. So that player can play this game again and again and again.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> OnJump()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(count &gt;= <span style="color:#ae81ff">18</span>) {<span style="color:#75715e">//player can jump only after winning </span>
</span></span><span style="display:flex;"><span>            rb.AddForce(<span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">10</span> * speed, <span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> CreateNewGround()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Instantiate new ground and new pick-ups</span>
</span></span><span style="display:flex;"><span>        GameObject ground = Instantiate(groundPrefab, <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, -<span style="color:#ae81ff">15</span>*level, <span style="color:#ae81ff">0</span>), Quaternion.identity);
</span></span><span style="display:flex;"><span>        ground.transform.localScale = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">2</span>*(level + <span style="color:#ae81ff">1</span>), <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>* (level + <span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; <span style="color:#ae81ff">18</span>; i++)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            Vector3 randomPosition = <span style="color:#66d9ef">new</span> Vector3(Random.Range(-<span style="color:#ae81ff">9f</span>*(level+<span style="color:#ae81ff">1</span>),<span style="color:#ae81ff">9f</span>*(level+<span style="color:#ae81ff">1</span>)), <span style="color:#ae81ff">0.5f</span>-level*<span style="color:#ae81ff">15f</span>, Random.Range(-<span style="color:#ae81ff">9f</span>* (level + <span style="color:#ae81ff">1</span>), <span style="color:#ae81ff">9f</span>* (level + <span style="color:#ae81ff">1</span>)));
</span></span><span style="display:flex;"><span>            Instantiate(pickupPrefab, randomPosition, Quaternion.identity);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p><img loading="lazy" src="multiple.png" alt="alt text"  />

<img loading="lazy" src="morelevel.gif" alt="alt text"  />
</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/lab/">Lab</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="">Mengfei&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
